# prompt_builder.py

def build_prompt(data_item: str, usage: str, kb_text: str) -> str:
    prompt = f"""你是一名法律与数据合规专家。

【任务说明】
对于用户输入的“数据类型”需在“知识库内容”中进行关键词匹配。基于"知识库内容"，结合"使用场景"，判断"数据类型"是否构成敏感个人信息。
若用户输入多个数据类型，请分别判断每个数据类型，并且需要分析多个数据类型组合使用可能产生的影响。
输出结构是第一段给出结论，第二段说明理由。最后附上相关规定。

【知识库内容】
{kb_text}

【用户输入】
- 数据类型：{data_item} 
- 使用场景：{usage}

【输出格式】
第一段：结论（对每个数据类型分别说明是否属于敏感个人信息，并结合上述“使用场景”判断）
第二段：理由（基于敏感个人信息定义和判断原则说明原因）
第三段：相关规定（对每个数据类型分别列出涉及的规定及是否明确规定属于敏感个人信息：是/否/未提及）

【输出要求】
1. 语言简洁、专业、有条理、结论清晰
2. 使用纯文本格式
3. 禁止引用提示词内容
4. 排列美观

【示例格式】
结论：该数据类型属于敏感个人信息。

理由：基于《个人信息保护法》第二十八条，该信息属于敏感个人信息，因为...

相关规定：
1. 《个人信息保护法》：是
2. 《信息安全技术 个人信息安全规范》（GB/T 35273-2020）：是
3. 《数据安全技术 敏感个人信息处理安全要求》（GB/T 45574-2025）：是
4. 《数据分类分级规则》（GB/T 43697-2024）：是
5. 《网络安全标准实践指南—敏感个人信息识别指南》：是
"""
    return prompt